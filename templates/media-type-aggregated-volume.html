
<style>

    .chart text {
        font-family: Open Sans,Helvetica Neue,Helvetica,sans-serif;
        font-feature-settings: "kern","liga","pnum";
        line-height: 1.7;
        color: #807874;
        fill: #807874;
    }

    .chart .axis path, .chart .axis line { fill: none; stroke: #e7e7e8; shape-rendering: crispEdges; }

    .chart .arc path {
        stroke: #fff !important;
        stroke-width: 3px;
    }


</style>
<div>
    <div class="chart-type-picker inline nmr pull-right" style="position:absolute; right: 20px;">
        <div id="chart_i_type" class="dropdown btn btn-default btn-icon nmr">
            <div><span class="toggle" onclick="$(this).next().toggle();"><span class="label"><span id="chart_i_icon" class="fa fa-bar-chart"></span></span></span>
                <ul class="menu">
                    <li>
                        <a onclick="onChartTypeSelected('bar', this)"><span class="fa fa-bar-chart-o"></span><span>Bar Chart</span></a>
                    </li>
                    <li>
                        <a onclick="onChartTypeSelected('horizontal_bar', this)"><span class="fa fa-bars"></span><span>Horizontal Bar Chart</span></a>
                    </li>
                    <li>
                        <a onclick="onChartTypeSelected('donut', this)"><span class="fa fa-pie-chart"></span><span>Donut Chart</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <svg id="chart_0" class="chart horizontal-stacked-bar" width="400" height="150"></svg>
    <div id="tooltip_chart_0" class="tooltip mouse"></div>
</div>
<script type="text/javascript">
    //[300, 250, 1050, 50]
    var data = [
        {
            name: 'Website',
            value: 400
        },
        {
            name: 'Magazine',
            value: 350
        },
        {
            name: 'Newspaper',
            value:600
        },
        {
            name: 'Blog',
            value: 50
        }
    ];

    var currentChartType = 'bar'

    var globalParameters = {
        data: data,
        element: '.chart',
        tooltipElement: 'div.tooltip.mouse'
    };

    $(function () {
        setChartDimension();
        loadBar();

        $(window).resize(function(){
            //  setChartDimension();
        });

    });

    function setChartDimension(){
        var chart_cont = $('#chart_0');
        var width = chart_cont.parent().width(),
            height = chart_cont.height();
        chart_cont.attr('width', width);
        //chart_cont.attr('height', height);
        //     chart_cont.attr('viewBox', '0 0 '+ width + ' ' + height);

    }

    function onChartTypeSelected(chart_type, element){
        setChartDimension();

        if(currentChartType !== chart_type) {
            var chart = 'i';
            if (chart_type === 'line') {
                $('#chart_' + chart + '_icon').attr('class', 'fa fa-line-chart');
            }
            else if (chart_type === 'area') {
                $('#chart_' + chart + '_icon').attr('class', 'fa fa-area-chart');
            }
            else if (chart_type === 'bar') {

                $('#chart_' + chart + '_icon').attr('class', 'fa fa-bar-chart-o');

                loadBar();
            }
            else if (chart_type === 'horizontal_bar') {

                var parameters = {
                    horizontal: true,
                    margin: {
                        top: 20,
                        left: 65,
                        right: 30,
                        bottom: 20
                    },
                    width: $('#chart_0').parent().parent().width(),
                    height: $('#chart_0').parent().parent().height(),
                    barHeight: 10,
                    updateLayout: currentChartType === 'bar' ? true : false
                };

                $('#chart_' + chart + '_icon').attr('class', 'fa fa-bars');
                generateBarChart(Object.assign(globalParameters, parameters));
            }
            else if (chart_type === 'area') {
                $('#chart_' + chart + '_icon').attr('class', 'fa fa-area-chart');
            }
            else if (chart_type === 'donut') {

                var parameters = {
                    margin : {
                        top: 80,
                        left: 80,
                        right: 80,
                        bottom: 80
                    },
                    width : 180,
                    height: $('#chart_0').parent().parent().height(),
                    barHeight: 10
                };

                $('#chart_' + chart + '_icon').attr('class', 'fa fa-pie-chart');
                generateDonutChart(Object.assign(globalParameters, parameters));
            }

            if(element !== undefined)
                $(element).closest('.menu').toggle();
        }

        currentChartType = chart_type;
    }

    function loadBar(){
        var parameters = {
            horizontal: false,
            margin: {
                top: 20,
                left: 30,
                right: 50,
                bottom: 30
            },
            width: $('#chart_0').parent().parent().width(),
            height: $('#chart_0').parent().parent().height(),
            updateLayout: currentChartType === 'horizontal_bar' ? true : false,
            barHeight: 50
        };

        generateBarChart(Object.assign(globalParameters, parameters));
    }


</script>